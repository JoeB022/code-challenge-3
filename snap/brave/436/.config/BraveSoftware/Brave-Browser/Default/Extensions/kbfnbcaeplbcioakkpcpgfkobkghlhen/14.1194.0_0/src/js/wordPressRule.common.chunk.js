(self.webpackChunk=self.webpackChunk||[]).push([[661],{64679:(e,t,i)=>{i.r(t),i.d(t,{Wordpress:()=>z,testOnly:()=>A});var o=i(90023),r=i(20715),n=i(90049),d=i(8748),a=i(18615),s=i(34859),l=i(73863),c=i(65647),p=i(12518),u=i(99514),g=i(89594),f=i(46808),b=i(12326),m=i(65271),E=i(72925),h=i(41817),y=i(68599),T=i(92014),W=i(67630),x=i(16374),P=i(31897),k=i(23153),w=i(13798),v=i(88900),G=i(92865),L=i(90522),B=i(48018);const C=y.T.textarea("Wordpress.newWPEditorTitle",(e=>({integrationName:"WPEditorTitle",validate:(e,t)=>(0,x.O)(e.field,e,t,[{ruleName:"isWordpressEditorTitle",match:e=>!!e.closest(".editor-post-title__block")}]),createLayout:()=>new E.A(e.field,{gbuttonMinPadding:k.rR})}))),S={kind:w.A.editable,name:"Wordpress.gutenbergEditorEmbeddedTitle",match:e=>{if(!e.experimentClient.isGateEnabled(L.K.WordPressGutenbergEditorGButtonPositioning))return p.left(w.x.fieldSkippedError({reason:"extension_wordpress_gutenberg_editor_gbutton_positioning gate not enabled",integrationName:"Wordpress.gutenbergEditorEmbeddedTitle",field:e.field}));const t=e.field.closest(".edit-post-visual-editor__post-title-wrapper");return t instanceof HTMLElement?y.T.contentEditable("Wordpress.gutenbergEditorEmbeddedTitle",(e=>({integrationName:"WPEditorEmbeddedTitle",target:t,matchCheckOverride:()=>!0,createLayout:()=>new E.A(t,{highlightsLayoutOptions:{heightOffset:-6}})}))).match(e):p.left(w.x.fieldSkippedError({reason:"not a Gutenberg block editor embedded title",integrationName:"Wordpress.gutenbergEditorEmbeddedTitle",field:e.field}))}},_=(e,t,i)=>({customGbuttonPositioning:{injectionElement:e,injectionStyle:{bottom:`${t}px`,right:`${i}px`,zIndex:m.op.toString()},createPositionStyleBehavior:e=>e.pipe(c.U((e=>({position:"absolute",width:"auto",height:"auto",pointerEvents:"all",right:`${e.left}px`,top:`${e.top}px`})))),calculateMetrics:(e,o,r)=>{const n=f.p8.create({top:e.size.height+r.top-t+g.V.gButtonMaxSize,left:e.size.width-r.left-i});return{offset:n,page:f.Cv.fromOffset(n,f.Cv.fromClient(e.client,{top:o.scrollY,left:o.scrollX}),{top:0,left:0}),client:f.Ir.create(f.E9.plus(e.client,n)),effectivePadding:{top:0,right:0,bottom:0,left:0},size:g.V.gButtonMaxSize}}}}),O=(e,t)=>{const i=e.experimentClient.isGateEnabled(L.K.WordPressGutenbergEditorGButtonPositioning);if(i){const e=t.closest(".wp-full-overlay-sidebar");if(e instanceof HTMLElement)return _(e,88,24)}const o=t.closest(".editor-styles-wrapper");if(o instanceof HTMLElement)return{createGbuttonShiftBehavior:()=>(0,r.of)({left:0,top:i?-10:20}),innerElementsField:o}},M={kind:w.A.editable,name:"Wordpress.newWPEditorBody",match:e=>{const t=e.experimentClient.isGateEnabled(L.K.WordPressGutenbergEditorGButtonPositioning)&&e.field.closest(".wp-block-post-content")||e.field.closest(".editor-block-list__layout")||e.field.closest(".block-editor-block-list__layout")||e.field.closest(".is-root-container");return t instanceof HTMLElement?y.T.contentEditable("Wordpress.newWPEditorBody",(i=>({integrationName:"WPEditorBody",target:t,matchCheckOverride:()=>!0,createLayout:()=>new E.A(t,O(e,t)),textMap:{createFieldTextMap:e=>P.Z.create(e,{andFilterNodeOutput:(e,t)=>t.outputConsidered||"textbox"===e.getAttribute("role")&&"true"!==e.getAttribute("data-is-placeholder-visible")||e instanceof HTMLElement&&e.isContentEditable})}}))).match(e):p.left(w.x.fieldSkippedError({reason:"not a Gutenberg block editor body",integrationName:"Wordpress.newWPEditorBody",field:e.field}))}};var z;!function(e){const t=y.T.iframe("Wordpress.pageAndPostEditor",(e=>({integrationName:"PageAndPostEditorIframe",expiration:(e,t)=>(0,n.T)((0,T.Jj)(t),(b.z.createShared(e)||(0,d.c)()).pipe((0,a.P)((e=>0===e.width||0===e.height)),(0,s.h)(void 0))).pipe((0,l.q)(1)),createLayoutOptions:{field:e.field,skipIframeBodyScroller:!0}}))),i=e=>{return(0,v.$W)({andCanExecute:e,name:"Wordpress"},[C,S,M,W.P.generic(),y.T.contentEditable("Wordpress",(()=>({createLayout:e=>new E.A(e)}))),t,(i=y.T.textarea("Wordpress",(()=>({createLayout:e=>new h.K(e)}))),y.T.namedFieldIntegrationRule("textareaExceptHtmlView",((e,t)=>(0,o.zG)((0,x.O)(e.field,e,t,[{ruleName:"isTinymce",match:e=>e.classList.contains("tinymce")}]),u.VS((()=>i.match(e))))))),y.T.iframe("Wordpress"),G.k.iframeHostRule]);var i};e.page=i((e=>(0,B.$)(e.domain,e.url))),e.pageFuzzy=i((e=>(0,B.C)(e.doc)))}(z||(z={}));const A={gutenbergEditorBody:M,gutenbergEditorEmbeddedTitle:S,gutenbergEditorTextareaTitle:C,getLayoutOptionsForGutenbergEditorBodyElement:O,getLayoutOptionsForScrollableEditor:_}}}]);